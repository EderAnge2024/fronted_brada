import{b as y,r,j as a}from"./index-DM_27y1d.js";const v="_cliente_8apgt_7",k="_cliente__title_8apgt_23",A="_cliente__form_8apgt_39",U="_cliente__list_8apgt_55",$="_form_8apgt_71",D="_form__input_8apgt_85",w="_list_8apgt_119",q="_card_8apgt_131",S="_card__content_8apgt_163",G="_card__item_8apgt_171",I="_card__label_8apgt_191",z="_card__actions_8apgt_201",F="_button_8apgt_215",L="_modal_8apgt_289",R="_modal__content_8apgt_315",T="_modal__close_8apgt_335",B="_modal__title_8apgt_361",H="_modal__actions_8apgt_371",e={cliente:v,cliente__title:k,cliente__form:A,cliente__list:U,form:$,form__input:D,list:w,card:q,card__content:S,card__item:G,card__label:I,card__actions:z,button:F,"button--primary":"_button--primary_8apgt_233","button--secondary":"_button--secondary_8apgt_251","button--danger":"_button--danger_8apgt_269",modal:L,modal__content:R,modal__close:T,modal__title:B,modal__actions:H},K=()=>{const{fetchCliente:o,addCliente:m,clientes:h,updateCliente:u,deleteCliente:N,loading:t,initializeFromStorage:p}=y(),[c,d]=r.useState(null),[n,i]=r.useState({Nombre:"",Apellido:"",NumCelular:"",Email:"",Usuario:"",Contrasena:""});r.useEffect(()=>{p(),o()},[p,o]);const s=r.useCallback(l=>{const{name:_,value:f}=l.target;i(E=>({...E,[_]:f}))},[]),C=r.useCallback(async l=>{l.preventDefault();try{await m(n),i({Nombre:"",Apellido:"",NumCelular:"",Email:"",Usuario:"",Contrasena:""}),alert("Cliente agregado correctamente")}catch{alert("Error al agregar cliente")}},[m,n]),x=r.useCallback(async l=>{if(window.confirm("¿Estás seguro de eliminar este cliente?"))try{await N(l),alert("Cliente elminado correctamente"),o()}catch{alert("Error al eliminar cliente")}},[]),g=r.useCallback(l=>{d(l),i({Nombre:l.Nombre,Apellido:l.Apellido,NumCelular:l.NumCelular,Email:l.Email,Usuario:l.Usuario,Contrasena:l.Contrasena})},[]),j=r.useCallback(async()=>{try{await u(c.ID_Cliente,n),d(null),i({Nombre:"",Apellido:"",NumCelular:"",Email:"",Usuario:"",Contrasena:""}),alert("Cliente actualizado correctamente")}catch{alert("Error al actualizar cliente")}},[c,n,u]),b=r.useCallback(()=>{d(null),i({Nombre:"",Apellido:"",NumCelular:"",Email:"",Usuario:"",Contrasena:""})},[]);return a.jsxs("div",{className:e.cliente,children:[a.jsxs("div",{className:e.cliente__form,children:[a.jsx("h1",{className:e.cliente__title,children:"Agregar clientes"}),a.jsxs("form",{onSubmit:C,className:e.form,children:[a.jsx("input",{type:"text",placeholder:"Nombre del cliente",required:!0,name:"Nombre",value:n.Nombre,onChange:s,className:e.form__input,disabled:t}),a.jsx("input",{type:"text",placeholder:"Apellido del cliente",required:!0,name:"Apellido",value:n.Apellido,onChange:s,className:e.form__input,disabled:t}),a.jsx("input",{type:"text",placeholder:"Número de celular",required:!0,name:"NumCelular",value:n.NumCelular,onChange:s,className:e.form__input,disabled:t}),a.jsx("input",{type:"email",placeholder:"Correo electrónico",required:!0,name:"Email",value:n.Email,onChange:s,className:e.form__input,disabled:t}),a.jsx("input",{type:"text",placeholder:"Usuario",required:!0,name:"Usuario",value:n.Usuario,onChange:s,className:e.form__input,disabled:t}),a.jsx("input",{type:"password",placeholder:"Contraseña",required:!0,name:"Contrasena",value:n.Contrasena,onChange:s,className:e.form__input,disabled:t}),a.jsx("button",{type:"submit",className:`${e.button} ${e["button--primary"]}`,disabled:t,children:t?"Guardando...":"Guardar Datos"})]})]}),a.jsxs("div",{className:e.cliente__list,children:[a.jsx("h1",{className:e.cliente__title,children:"Lista de clientes"}),t&&a.jsx("p",{children:"Cargando..."}),a.jsx("div",{className:e.list,children:h.map(l=>a.jsxs("div",{className:e.card,children:[a.jsxs("div",{className:e.card__content,children:[a.jsxs("p",{className:e.card__item,children:[a.jsx("span",{className:e.card__label,children:"Nombre:"}),l.Nombre]}),a.jsxs("p",{className:e.card__item,children:[a.jsx("span",{className:e.card__label,children:"Apellido:"}),l.Apellido]}),a.jsxs("p",{className:e.card__item,children:[a.jsx("span",{className:e.card__label,children:"Celular:"}),l.NumCelular]}),l.token&&a.jsxs("p",{className:e.card__item,children:[a.jsx("span",{className:e.card__label,children:"Token:"}),l.token]}),a.jsxs("p",{className:e.card__item,children:[a.jsx("span",{className:e.card__label,children:"Email:"}),l.Email]}),a.jsxs("p",{className:e.card__item,children:[a.jsx("span",{className:e.card__label,children:"Usuario:"}),l.Usuario]}),a.jsxs("p",{className:e.card__item,children:[a.jsx("span",{className:e.card__label,children:"Contraseña:"}),l.Contrasena]})]}),a.jsxs("div",{className:e.card__actions,children:[a.jsx("button",{className:`${e.button} ${e["button--danger"]}`,onClick:()=>x(l.ID_Cliente),"aria-label":"Eliminar cliente",disabled:t,children:"Eliminar"}),a.jsx("button",{className:`${e.button} ${e["button--secondary"]}`,onClick:()=>g(l),"aria-label":"Editar cliente",disabled:t,children:"Editar"})]})]},l.ID_Cliente))}),c&&a.jsx("div",{className:e.modal,children:a.jsxs("div",{className:e.modal__content,children:[a.jsx("span",{className:e.modal__close,onClick:b,"aria-label":"Cerrar modal",children:"×"}),a.jsx("h3",{className:e.modal__title,children:"Editar cliente"}),a.jsx("input",{type:"text",name:"Nombre",value:n.Nombre,onChange:s,placeholder:"Nombre del cliente",className:e.form__input,disabled:t}),a.jsx("input",{type:"text",name:"Apellido",value:n.Apellido,onChange:s,placeholder:"Apellido del cliente",className:e.form__input,disabled:t}),a.jsx("input",{type:"text",name:"NumCelular",value:n.NumCelular,onChange:s,placeholder:"Número de celular",className:e.form__input,disabled:t}),a.jsx("input",{type:"email",name:"Email",value:n.Email,onChange:s,placeholder:"Email",className:e.form__input,disabled:t}),a.jsx("input",{type:"text",name:"Usuario",value:n.Usuario,onChange:s,placeholder:"Usuario",className:e.form__input,disabled:t}),a.jsx("input",{type:"password",name:"Contrasena",value:n.Contrasena,onChange:s,placeholder:"Contraseña",className:e.form__input,disabled:t}),a.jsxs("div",{className:e.modal__actions,children:[a.jsx("button",{className:`${e.button} ${e["button--primary"]}`,onClick:j,disabled:t,children:t?"Guardando...":"Guardar"}),a.jsx("button",{className:`${e.button} ${e["button--danger"]}`,onClick:b,disabled:t,children:"Cancelar"})]})]})})]})]})};export{K as default};
