import{n as N,r as d,j as e}from"./index-DM_27y1d.js";const P="_container_ph4lu_1",D="_formContainer_ph4lu_25",v="_formTitle_ph4lu_41",b="_form_ph4lu_25",y="_input_ph4lu_63",T="_button_ph4lu_81",w="_listContainer_ph4lu_111",B="_listTitle_ph4lu_119",S="_pedidoCard_ph4lu_129",k="_pedidoInfo_ph4lu_147",O="_deleteButton_ph4lu_155",W="_editButton_ph4lu_173",$="_modalOverlay_ph4lu_189",q="_modalWindow_ph4lu_215",z="_modalClose_ph4lu_233",G="_modalTitle_ph4lu_259",U="_botones_ph4lu_269",a={container:P,formContainer:D,formTitle:v,form:b,input:y,button:T,listContainer:w,listTitle:B,pedidoCard:S,pedidoInfo:k,deleteButton:O,editButton:W,modalOverlay:$,modalWindow:q,modalClose:z,modalTitle:G,botones:U},L=()=>{const{addPedido:p,fetchPedido:C,pedidos:i,deletePedido:g,updatePedido:x}=N(),[u,s]=d.useState(null),[n,_]=d.useState({ID_Cliente:"",Fecha_Pedido:"",Fecha_Entrega:""}),[o,r]=d.useState({ID_Cliente:"",Fecha_Pedido:"",Fecha_Entrega:""});d.useEffect(()=>{C()},[]);const c=t=>{const{name:l,value:I}=t.target;_({...n,[l]:I})},j=async t=>{t.preventDefault();try{await p(n),_({ID_Cliente:"",Fecha_Pedido:"",Fecha_Entrega:""}),alert("Se agregó el pedido")}catch(l){console.error("Error al agregar pedido:",l),alert("Error al agregar el pedido")}},E=async t=>{if(window.confirm("¿Estás seguro de eliminar este pedido?"))try{await g(t)}catch(l){console.error("Error al eliminar pedido:",l),alert("Error al eliminar el pedido")}},f=t=>{s(t),r({ID_Cliente:t.ID_Cliente,Fecha_Pedido:t.Fecha_Pedido,Fecha_Entrega:t.Fecha_Entrega})},h=t=>{r({...o,[t.target.name]:t.target.value})},F=async()=>{try{await x(u.ID_Pedido,o),s(null),alert("Pedido actualizado correctamente")}catch(t){console.error("Error al actualizar pedido:",t),alert("Error al actualizar el pedido")}},m=()=>{s(null),r({ID_Cliente:"",Fecha_Pedido:"",Fecha_Entrega:""})};return e.jsxs("div",{className:a.container,children:[e.jsxs("div",{className:a.formContainer,children:[e.jsx("h1",{className:a.formTitle,children:"Agregar pedidos"}),e.jsxs("form",{onSubmit:j,className:a.form,children:[e.jsx("input",{className:a.input,type:"text",placeholder:"ID del Cliente",required:!0,name:"ID_Cliente",value:n.ID_Cliente,onChange:c}),e.jsx("input",{className:a.input,type:"date",placeholder:"Fecha del Pedido",required:!0,name:"Fecha_Pedido",value:n.Fecha_Pedido,onChange:c}),e.jsx("input",{className:a.input,type:"date",placeholder:"Fecha de Entrega",required:!0,name:"Fecha_Entrega",value:n.Fecha_Entrega,onChange:c}),e.jsx("button",{type:"submit",className:a.button,children:"Guardar Datos"})]})]}),e.jsxs("div",{className:a.listContainer,children:[e.jsx("h1",{className:a.listTitle,children:"Lista de pedidos"}),e.jsx("div",{children:i&&i.length>0?i.map(t=>e.jsxs("div",{className:a.pedidoCard,children:[e.jsxs("p",{className:a.pedidoInfo,children:["ID: ",t.ID_Pedido]}),e.jsxs("p",{className:a.pedidoInfo,children:["ID Cliente: ",t.ID_Cliente]}),e.jsxs("p",{className:a.pedidoInfo,children:["Fecha Pedido: ",t.Fecha_Pedido]}),e.jsxs("p",{className:a.pedidoInfo,children:["Fecha Entrega: ",t.Fecha_Entrega]}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>E(t.ID_Pedido),className:`${a.button} ${a.deleteButton}`,children:"Eliminar"}),e.jsx("button",{onClick:()=>f(t),className:`${a.button} ${a.editButton}`,children:"Editar"})]})]},t.ID_Pedido)):e.jsx("p",{children:"No hay pedidos disponibles"})}),u&&e.jsx("div",{className:a.modalOverlay,children:e.jsxs("div",{className:a.modalWindow,children:[e.jsx("span",{className:a.modalClose,onClick:m,children:"×"}),e.jsx("h3",{className:a.modalTitle,children:"Editar pedido"}),e.jsx("input",{className:a.input,type:"text",name:"ID_Cliente",value:o.ID_Cliente,onChange:h,placeholder:"ID del Cliente"}),e.jsx("input",{className:a.input,type:"date",name:"Fecha_Pedido",value:o.Fecha_Pedido,onChange:h,placeholder:"Fecha del Pedido"}),e.jsx("input",{className:a.input,type:"date",name:"Fecha_Entrega",value:o.Fecha_Entrega,onChange:h,placeholder:"Fecha de Entrega"}),e.jsxs("div",{className:a.botones,children:[e.jsx("button",{onClick:F,className:a.button,children:"Guardar"}),e.jsx("button",{onClick:m,className:a.button,children:"Cancelar"})]})]})})]})]})};export{L as default};
