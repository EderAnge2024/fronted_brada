import{y as E,r as a,j as o}from"./index-DM_27y1d.js";const S="_container_mrebh_1",w="_formContainer_mrebh_25",B="_formTitle_mrebh_41",k="_form_mrebh_25",O="_input_mrebh_63",W="_button_mrebh_81",$="_listContainer_mrebh_111",q="_listTitle_mrebh_119",z="_deleteButton_mrebh_155",U="_editButton_mrebh_173",G="_modalOverlay_mrebh_189",A="_modalWindow_mrebh_215",F="_modalClose_mrebh_233",L="_modalTitle_mrebh_259",R="_botones_mrebh_269",H="_formInput_mrebh_279",e={container:S,formContainer:w,formTitle:B,form:k,input:O,button:W,listContainer:$,listTitle:q,deleteButton:z,editButton:U,modalOverlay:G,modalWindow:A,modalClose:F,modalTitle:L,botones:R,formInput:H},K=()=>{const{addInformacion:x,fetchInformacion:I,informacions:l,deleteInformacion:b,updateInformacion:j}=E(),[d,s]=a.useState(null),[r,u]=a.useState({Tipo_Informacion:"",Dato:""}),[i,c]=a.useState({Tipo_Informacion:"",Dato:""}),[v,f]=a.useState(!1),[C,m]=a.useState(!1);a.useEffect(()=>{I()},[]);const h=n=>{const{name:t,value:y}=n.target;u({...r,[t]:y})},D=async n=>{f(!0),m(!0),n.preventDefault();try{await x(r),u({Tipo_Informacion:"",Dato:""}),alert("Se agregó la información")}catch(t){console.error("Error al agregar información:",t),alert("Error al agregar la información")}finally{f(!1),m(!1)}},T=async n=>{if(window.confirm("¿Estás seguro de eliminar esta información?"))try{await b(n)}catch(t){console.error("Error al eliminar información:",t),alert("Error al eliminar la información")}},g=n=>{s(n),c({Tipo_Informacion:n.Tipo_Informacion,Dato:n.Dato})},_=n=>{c({...i,[n.target.name]:n.target.value})},N=async()=>{m(!0);try{await j(d.ID_Informacion,i),s(null),alert("Información actualizada correctamente")}catch(n){console.error("Error al actualizar información:",n),alert("Error al actualizar la información")}},p=()=>{s(null),c({Tipo_Informacion:"",Dato:""})};return o.jsxs("div",{className:e.container,children:[o.jsxs("div",{className:e.formContainer,children:[o.jsx("h1",{className:e.formTitle,children:"Agregar información"}),o.jsxs("form",{onSubmit:D,className:e.form,children:[o.jsxs("select",{required:!0,name:"Tipo_Informacion",value:r.Tipo_Informacion,onChange:h,className:e.formInput,disabled:v,children:[o.jsx("option",{value:"",children:"Seleccione tipo de Informacion"}),o.jsx("option",{value:"Telefono",children:"Telefono"}),o.jsx("option",{value:"Direccion",children:"Direccion"}),o.jsx("option",{value:"Servicios",children:"Servicios"}),o.jsx("option",{value:"Correo",children:"Correo electronico"})]}),o.jsx("input",{className:e.input,type:"text",placeholder:"Dato",required:!0,name:"Dato",value:r.Dato,onChange:h}),o.jsx("button",{type:"submit",className:e.button,children:"Guardar Datos"})]})]}),o.jsxs("div",{className:e.listContainer,children:[o.jsx("h1",{className:e.listTitle,children:"Lista de información"}),o.jsx("div",{children:l&&l.length>0?l.map(n=>o.jsxs("div",{className:e.informacionCard,children:[o.jsxs("p",{className:e.informacionInfo,children:["ID: ",n.ID_Informacion]}),o.jsxs("p",{className:e.informacionInfo,children:["Tipo: ",n.Tipo_Informacion]}),o.jsxs("p",{className:e.informacionInfo,children:["Dato: ",n.Dato]}),o.jsxs("div",{children:[o.jsx("button",{onClick:()=>T(n.ID_Informacion),className:`${e.button} ${e.deleteButton}`,children:"Eliminar"}),o.jsx("button",{onClick:()=>g(n),className:`${e.button} ${e.editButton}`,children:"Editar"})]})]},n.ID_Informacion)):o.jsx("p",{children:"No hay información disponible"})}),d&&o.jsx("div",{className:e.modalOverlay,children:o.jsxs("div",{className:e.modalWindow,children:[o.jsx("span",{className:e.modalClose,onClick:p,children:"×"}),o.jsx("h3",{className:e.modalTitle,children:"Editar información"}),o.jsxs("select",{required:!0,name:"Tipo_Informacion",value:i.Tipo_Informacion,onChange:_,className:e.formInput,disabled:C,children:[o.jsx("option",{value:"",children:"Seleccione tipo de Informacion"}),o.jsx("option",{value:"Telefono",children:"Telefono"}),o.jsx("option",{value:"Direccion",children:"Direccion"}),o.jsx("option",{value:"Servicios",children:"Servicios"}),o.jsx("option",{value:"Correo",children:"Correo electronico"})]}),o.jsx("input",{className:e.input,type:"text",name:"Dato",value:i.Dato,onChange:_,placeholder:"Dato"}),o.jsxs("div",{className:e.botones,children:[o.jsx("button",{onClick:N,className:e.button,children:"Guardar"}),o.jsx("button",{onClick:p,className:e.button,children:"Cancelar"})]})]})})]})]})};export{K as default};
